<!DOCTYPE html>
<html>
<head>
	<title>Converter</title>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="styles.css">
</head>

<body>
	<div id = "container">
		<h1 id = "name">ShengTa Chung</h1>
		<div id = "email">schung21@gmu.edu</div>
		<div id = "information">
			Binary/Decimal/Hexadecimal Converter
		</div>
		<div id = "bar">
			<ul id = "barMenu">
				<li><a href="http://mason.gmu.edu/~schung21"> Home </a></li>
				<li><a href="">Resume(PDF)</a></li>
				<li><a href="http://mason.gmu.edu/~schung21/tools">Tools</a></li>
			</ul>
		</div>
	</div><br/><br/>
	<div id = "container2"><br/>
		<div id = "binaryDisplay">
			<h3>Binary</h3>
			<table id = "binaryTable">
				<tr><th id = "binaryCell"></th></tr>
			</table>
		</div>
		<div id = "decimalDisplay">
			<h3>Decimal</h3>
			<table id = "decimalTable">
				<tr><th id = "decimalCell"></th></tr>
			</table>
		</div>
		<div id = "hexDisplay">
			<h3>Hexadecimal</h3>
			<table id = "hexTable">
				<tr><th id = "hexCell"></th></tr>
			</table>
		</div><br/>
		<div id = "innerContainer"><br/>
			<div id = "input">
				Value: <input type = "text" id = "inputValue" onkeypress="enterCalc(event)">
				<select id = "BDH">
					<option>Binary</option>
					<option>Decimal</option>
					<option>Hexadecimal</option>
				</select>
				<button onclick = "calculate()">Calculate</button>
			</div>
		</div>
	</div>
	<script language = "JavaScript">
function enterCalc(event){
	var x = event.keyCode;
	if( x == 13)
		calculate();
}
function calculate(){
	var bin, dec, hex;
	var representation = document.getElementById("BDH");
	var option = representation.options[representation.selectedIndex].text;
	if(option == "Binary"){
		if(inputValidationB()){
			bin = document.getElementById("inputValue").value;
			dec = binaryToDecimal(bin);		
			hex = decimalToHex(dec);
			document.getElementById("hexCell").innerHTML = hex;
			document.getElementById("decimalCell").innerHTML = dec;
			document.getElementById("binaryCell").innerHTML = bin;
		}
	}
	else if(option == "Decimal"){
		if(inputValidationD()){
			dec = document.getElementById("inputValue").value;
			bin = decimalToBinary(dec);		
			hex = decimalToHex(dec); 
			document.getElementById("hexCell").innerHTML = hex;
			document.getElementById("decimalCell").innerHTML = dec;
			document.getElementById("binaryCell").innerHTML = bin;
		}
	}
	else{
		if(inputValidationH()){
			hex = document.getElementById("inputValue").value;
			dec = hexToDecimal(hex);	
			bin = decimalToBinary(dec);
			document.getElementById("hexCell").innerHTML = hex;
			document.getElementById("decimalCell").innerHTML = dec;
			document.getElementById("binaryCell").innerHTML = bin;
		}
	}
}
function binaryToDecimal(valueText){
	var i;
	var decimalResult = 0;
	for(i = 0; i < valueText.length; i++)
		decimalResult = decimalResult + parseInt( valueText[ valueText.length - (i+1) ] ) * Math.pow(2, i);
	return decimalResult;
}
function decimalToBinary(valueText){
	var binaryResult = "";
	if(valueText == 0){ return 0;}
	while(valueText != 0){
		var tempVal = Math.floor(valueText % 2);
		binaryResult = ( tempVal.toString() ).concat(binaryResult);
		valueText = Math.floor(valueText / 2);
	}
	binaryResult = binaryBitFix(binaryResult);
	return binaryResult;
}
function binaryBitFix(bValue){
	var length = bValue.length;
	var numZeroNeed = 8 - (length % 8);
	var zero = "0";
	for(var i = 0; i < numZeroNeed && numZeroNeed != 8; i++)
		bValue = zero.concat(bValue);
	length = bValue.length;
	var count = 0;
	for(var i = 0; i < length; i++){
		count++;
		if(count == 8){
			bValue = bValue.slice(0, i+1) + " " + bValue.slice(i+1);
			length++;
			i++;
			count = 0;
		}
	}
	return bValue;
}
function decimalToHex(valueText){
	var hexResult = "";
	if(valueText == 0){ return 0; }
	while(valueText != 0){
		var tempVal = Math.floor(valueText % 16);
		if(tempVal > 9){
			var charVal;
			switch(tempVal){
				case 10:
					charVal = "A"; break;
				case 11:
					charVal = "B"; break;
				case 12:
					charVal = "C"; break;
				case 13:
					charVal = "D"; break;
				case 14:
					charVal = "E"; break;
				case 15:
					charVal = "F"; break;
			}
			hexResult = charVal.concat(hexResult);
		}
		else
			hexResult = ( tempVal.toString() ).concat(hexResult);
		valueText = Math.floor(valueText / 16);
	}
	return hexResult;
}
function hexToDecimal(valueText){
	var i;
	var decimalResult = 0;
	for(i = 0; i < valueText.length; i++){
		var numOrChar = valueText[valueText.length - (i+1)]
		var num;
		switch(numOrChar){
			case "A":case "a":
				num = 10; break;
			case "B":case "b":
				num = 11; break;
			case "C":case "c":
				num = 12; break;
			case "D":case "d":
				num = 13; break;
			case "E":case "e":
				num = 14; break;
			case "F":case "f":
				num = 15; break;
			default:
				num = parseInt(valueText[valueText.length - (i+1)]); break;
		}
		if(i == 0)
			decimalResult = decimalResult + num;
		else
			decimalResult = decimalResult + num * Math.pow(16, i);
	}
	return decimalResult;
}
function inputValidationB(){
	var valid = true;	
	bin = document.getElementById("inputValue").value;
	for(var i = 0; i < bin.length; i++){
		switch(bin[i]){
			case "0": case "1": break;
			default:
				valid = false; break;
		}
	}
	if(valid == false)
		invalidOutput();
	return valid;
}
function inputValidationD(){
	var valid = true;
	dec = document.getElementById("inputValue").value;
	for(var i = 0; i < dec.length; i++){
		switch(dec[i]){
			case "0":case "1":case "2":case "3":case "4": 
			case "5":case "6":case "7":case "8":case "9":break;
			default:
				valid = false; break;
		}
	}

	if(valid == false)
		invalidOutput();
	return valid;
}
function inputValidationH(){
	var valid = true;
	hec = document.getElementById("inputValue").value;
	for(var i = 0; i < hec.length; i++){
		switch(hec[i]){
			case "0":case "1":case "2":case "3":case "4": 
			case "5":case "6":case "7":case "8":case "9":
			case "A":case "a":case "B":case "b":case "C":
			case "c":case "D":case "d":case "E":case "e":
			case "F":case "f": break;
			default:
				valid = false; break;
		}
	}
	if(valid == false)
		invalidOutput();
	return valid;
}
function invalidOutput(){
	var message = "Invalid Input";
	document.getElementById("hexCell").innerHTML = message;
	document.getElementById("decimalCell").innerHTML = message;
	document.getElementById("binaryCell").innerHTML = message;
}
	</script>
</body>
</html>
